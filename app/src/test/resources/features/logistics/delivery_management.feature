# language: zh-TW
功能: 配送管理
  作為一個客戶
  我希望能夠追蹤我的訂單配送狀態
  以便知道何時能收到商品

  背景:
    假設我已經創建了一個訂單
    並且我已經成功支付了訂單
    並且訂單狀態為 "已確認"

  場景: 成功安排配送
    當系統安排配送
    並且物流系統建立配送單
    那麼配送狀態應該更新為 "待發貨"
    並且我應該收到配送安排的通知
    並且通知應該包含預計配送時間

  場景: 配送資源分配
    假設物流系統已建立配送單
    當物流系統分配配送資源
    並且配送員接受配送任務
    那麼配送狀態應該更新為 "配送中"
    並且我應該能夠查看配送員信息
    並且我應該能夠追蹤配送實時位置

  場景: 成功完成配送
    假設配送狀態為 "配送中"
    當配送員送達商品
    並且我簽收商品
    那麼配送狀態應該更新為 "已送達"
    並且訂單狀態應該更新為 "已完成"
    並且我應該收到配送完成的通知

  場景: 配送延遲
    假設配送狀態為 "配送中"
    當配送過程中遇到延遲
    並且配送員更新延遲原因
    那麼配送狀態應該更新為 "延遲"
    並且我應該收到配送延遲的通知
    並且通知應該包含延遲原因和新的預計送達時間

  場景: 配送地址更新
    假設配送狀態為 "待發貨"
    當我請求更新配送地址
    並且我提供新的有效地址
    那麼系統應該更新配送地址
    並且物流系統應該更新配送單信息
    並且我應該收到地址更新成功的通知

  場景: 配送失敗 - 無人簽收
    假設配送狀態為 "配送中"
    當配送員到達配送地址
    並且無人簽收
    那麼配送員應該記錄配送失敗
    並且配送狀態應該更新為 "配送失敗"
    並且系統應該安排重新配送
    並且我應該收到配送失敗的通知
    並且通知應該包含重新配送的信息

  場景: 客戶拒收
    假設配送狀態為 "配送中"
    當配送員到達配送地址
    並且我拒絕簽收
    並且我提供拒收原因
    那麼配送員應該記錄拒收信息
    並且配送狀態應該更新為 "已拒收"
    並且系統應該創建退貨流程
    並且我應該收到退貨流程已啟動的通知